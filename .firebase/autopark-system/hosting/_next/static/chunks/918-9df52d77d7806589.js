"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[918],{868:(e,s,t)=>{t.d(s,{A:()=>n});var r=t(5155);let a={success:"bg-green-100 text-green-800",info:"bg-blue-100 text-blue-800",warning:"bg-yellow-100 text-yellow-800",danger:"bg-red-100 text-red-800"},l={success:"bg-green-500",info:"bg-blue-500",warning:"bg-yellow-500",danger:"bg-red-500"},i={sm:"px-2.5 py-0.5 text-xs",md:"px-3 py-1 text-sm"},n=e=>{let{status:s,variant:t,size:n="md",showDot:d=!1}=e;return(0,r.jsxs)("span",{className:"inline-flex items-center gap-2 font-medium rounded-full ".concat(i[n]," ").concat(a[t]),children:[d&&(0,r.jsx)("span",{className:"w-2 h-2 rounded-full ".concat(l[t])}),s]})}},926:(e,s,t)=>{Object.defineProperty(s,"__esModule",{value:!0}),!function(e,s){for(var t in s)Object.defineProperty(e,t,{enumerable:!0,get:s[t]})}(s,{callServer:function(){return r.callServer},createServerReference:function(){return l.createServerReference},findSourceMapURL:function(){return a.findSourceMapURL}});let r=t(1209),a=t(5153),l=t(7197)},983:(e,s,t)=>{t.d(s,{A:()=>i});var r=t(5155);let a={blue:"bg-blue-500",green:"bg-green-500",purple:"bg-purple-500",orange:"bg-orange-500",red:"bg-red-500"},l={up:"text-green-400",down:"text-red-400",neutral:"text-gray-400"},i=e=>{let{title:s,value:t,change:i,trend:n="neutral",icon:d,color:o="blue",description:c}=e;return(0,r.jsxs)("div",{className:"relative overflow-hidden rounded-2xl bg-white shadow-lg border border-gray-100 hover:shadow-xl transition-all duration-300 group",children:[(0,r.jsx)("div",{className:"absolute inset-0 ".concat(a[o]," opacity-5 group-hover:opacity-10 transition-opacity")}),(0,r.jsxs)("div",{className:"relative p-6",children:[(0,r.jsxs)("div",{className:"flex items-start justify-between",children:[(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsx)("p",{className:"text-sm font-medium text-gray-600 mb-1",children:s}),(0,r.jsx)("p",{className:"text-3xl font-bold text-gray-900 mb-2",children:t}),c&&(0,r.jsx)("p",{className:"text-xs text-gray-500",children:c})]}),(0,r.jsx)("div",{className:"p-3 rounded-xl ".concat(a[o]," text-white shadow-lg"),children:d})]}),i&&(0,r.jsxs)("div",{className:"flex items-center mt-4 pt-4 border-t border-gray-100",children:[(0,r.jsxs)("div",{className:"flex items-center text-sm font-medium ".concat(l[n]),children:["up"===n&&(0,r.jsx)("svg",{className:"w-4 h-4 mr-1",fill:"currentColor",viewBox:"0 0 20 20",children:(0,r.jsx)("path",{fillRule:"evenodd",d:"M5.293 9.707a1 1 0 010-1.414l4-4a1 1 0 011.414 0l4 4a1 1 0 01-1.414 1.414L11 7.414V15a1 1 0 11-2 0V7.414L6.707 9.707a1 1 0 01-1.414 0z",clipRule:"evenodd"})}),"down"===n&&(0,r.jsx)("svg",{className:"w-4 h-4 mr-1",fill:"currentColor",viewBox:"0 0 20 20",children:(0,r.jsx)("path",{fillRule:"evenodd",d:"M14.707 10.293a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 111.414-1.414L9 12.586V5a1 1 0 012 0v7.586l2.293-2.293a1 1 0 011.414 0z",clipRule:"evenodd"})}),i]}),(0,r.jsx)("span",{className:"text-xs text-gray-500 ml-2",children:"за последний месяц"})]})]})]})}},4585:(e,s,t)=>{t.d(s,{BV:()=>c,j2:()=>d,kA:()=>o,yA:()=>n});var r=t(2078),a=t(2553),l=t(9708),i=t(1446);let n=(0,r.Dk)().length?(0,r.Sx)():(0,r.Wp)({apiKey:"AIzaSyBTdkRQUoEWJFTXNP5vGD8_DYZjLcyDpog",authDomain:"autopark-system.firebaseapp.com",projectId:"autopark-system",storageBucket:"autopark-system.firebasestorage.app",messagingSenderId:"375110425620",appId:"1:375110425620:web:0f357c1d44927b0d219b01",measurementId:"G-2VV3093XBH"}),d=(0,a.xI)(n),o=(0,l.aU)(n),c=(0,i.dG)(n)},5537:(e,s,t)=>{t.r(s),t.d(s,{default:()=>g});var r=t(5155),a=t(2115),l=t(9934),i=t(9708),n=t(926);let d=(0,n.createServerReference)("003654332b543b3ec5e78a13a62a71f2623410b089",n.callServer,void 0,n.findSourceMapURL,"getDrivers"),o=(0,n.createServerReference)("402857a5e5c2dba66b5a78401a9ff015f3ea695be7",n.callServer,void 0,n.findSourceMapURL,"createTask");var c=t(983),x=t(868);let u={low:"bg-gray-100 text-gray-600",medium:"bg-yellow-100 text-yellow-600",high:"bg-red-100 text-red-600"},h={low:"Низкий",medium:"Средний",high:"Высокий"},m=e=>{let{tasks:s,drivers:t,loading:l=!1}=e,[i,n]=(0,a.useState)("all"),[d,o]=(0,a.useState)("created"),c=[...s.filter(e=>"all"===i||e.status===i)].sort((e,s)=>{switch(d){case"priority":let t={high:3,medium:2,low:1};return(t[s.priority]||1)-(t[e.priority]||1);case"status":return e.status.localeCompare(s.status);default:return new Date(s.createdAt||0).getTime()-new Date(e.createdAt||0).getTime()}});return l?(0,r.jsx)("div",{className:"space-y-4",children:[void 0,void 0,void 0].map((e,s)=>(0,r.jsx)("div",{className:"animate-pulse bg-gray-100 rounded-xl h-24"},s))}):(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4 justify-between",children:[(0,r.jsx)("div",{className:"flex flex-wrap gap-2",children:[{key:"all",label:"Все",count:s.length},{key:"pending",label:"Ожидают",count:s.filter(e=>"pending"===e.status).length},{key:"in_progress",label:"В работе",count:s.filter(e=>"in_progress"===e.status).length},{key:"completed",label:"Завершено",count:s.filter(e=>"completed"===e.status).length}].map(e=>{let{key:s,label:t,count:a}=e;return(0,r.jsxs)("button",{onClick:()=>n(s),className:"px-4 py-2 rounded-lg text-sm font-medium transition-all duration-200 ".concat(i===s?"bg-blue-500 text-white shadow-lg":"bg-gray-100 text-gray-600 hover:bg-gray-200"),children:[t," (",a,")"]},s)})}),(0,r.jsxs)("select",{value:d,onChange:e=>o(e.target.value),className:"px-3 py-2 border border-gray-200 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,r.jsx)("option",{value:"created",children:"По дате создания"}),(0,r.jsx)("option",{value:"priority",children:"По приоритету"}),(0,r.jsx)("option",{value:"status",children:"По статусу"})]})]}),0===c.length?(0,r.jsxs)("div",{className:"text-center py-12",children:[(0,r.jsx)("div",{className:"w-16 h-16 mx-auto mb-4 bg-gray-100 rounded-full flex items-center justify-center",children:(0,r.jsx)("svg",{className:"w-8 h-8 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})})}),(0,r.jsx)("p",{className:"text-gray-500 font-medium",children:"all"===i?"Задач пока нет":'Нет задач со статусом "'.concat(i,'"')}),(0,r.jsx)("p",{className:"text-sm text-gray-400 mt-1",children:"all"===i?"Создайте первую задачу для начала работы":"Попробуйте изменить фильтр"})]}):(0,r.jsx)("div",{className:"space-y-4",children:c.map(e=>{let s=t.find(s=>s.uid===e.assignedTo);return(0,r.jsx)("div",{className:"bg-white rounded-xl border border-gray-200 hover:shadow-lg transition-all duration-200 overflow-hidden group",children:(0,r.jsxs)("div",{className:"p-6",children:[(0,r.jsxs)("div",{className:"flex items-start justify-between mb-4",children:[(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsxs)("div",{className:"flex items-center gap-3 mb-2",children:[(0,r.jsx)("h3",{className:"text-lg font-semibold text-gray-900 group-hover:text-blue-600 transition-colors",children:e.title}),e.priority&&(0,r.jsx)("span",{className:"px-2 py-1 text-xs font-medium rounded-full ".concat(u[e.priority]),children:h[e.priority]})]}),(0,r.jsx)("p",{className:"text-gray-600 mb-3",children:e.description}),(0,r.jsxs)("div",{className:"flex items-center gap-4 text-sm text-gray-500",children:[(0,r.jsxs)("div",{className:"flex items-center gap-1",children:[(0,r.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})}),(0,r.jsx)("span",{children:(null==s?void 0:s.email)||"Неизвестно"})]}),e.createdAt&&(0,r.jsxs)("div",{className:"flex items-center gap-1",children:[(0,r.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),(0,r.jsx)("span",{children:new Date(e.createdAt).toLocaleDateString("ru-RU")})]})]})]}),(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[(0,r.jsx)(x.A,{status:"completed"===e.status?"Завершено":"in_progress"===e.status?"В работе":"Ожидает",variant:"completed"===e.status?"success":"in_progress"===e.status?"info":"warning"}),(0,r.jsxs)("div",{className:"flex items-center gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[(0,r.jsx)("button",{className:"p-2 text-gray-400 hover:text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",title:"Редактировать",children:(0,r.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})})}),(0,r.jsx)("button",{className:"p-2 text-gray-400 hover:text-red-600 hover:bg-red-50 rounded-lg transition-colors",title:"Удалить",children:(0,r.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})]})]}),"in_progress"===e.status&&(0,r.jsxs)("div",{className:"mt-4 pt-4 border-t border-gray-100",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,r.jsx)("span",{className:"text-sm text-gray-600",children:"Прогресс выполнения"}),(0,r.jsx)("span",{className:"text-sm font-medium text-gray-900",children:"65%"})]}),(0,r.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2",children:(0,r.jsx)("div",{className:"bg-blue-500 h-2 rounded-full transition-all duration-300",style:{width:"65%"}})})]})]})},e.id)})})]})};function g(){let{auth:e,firestore:s}=(0,l.D)(),[t,n]=(0,a.useState)([]),[x,u]=(0,a.useState)([]),[h,g]=(0,a.useState)(!0),[p,v]=(0,a.useState)(!0),[j,b]=(0,a.useState)(!1),[f,y]=(0,a.useState)(""),[N,w]=(0,a.useState)(""),[k,L]=(0,a.useState)(""),[M,C]=(0,a.useState)("medium"),[S,B]=(0,a.useState)(""),[A,z]=(0,a.useState)(!1);(0,a.useEffect)(()=>{!async function(){let e=await d();e.success&&u(e.drivers||[]),v(!1)}()},[]),(0,a.useEffect)(()=>{let e=(0,i.P)((0,i.rJ)(s,"tasks"),(0,i.My)("createdAt","desc")),t=(0,i.aQ)(e,e=>{n(e.docs.map(e=>({id:e.id,...e.data()}))),g(!1)},e=>{console.error(e),g(!1)});return()=>t()},[s]);let W=async s=>{var t;if(s.preventDefault(),!f||!N||!k)return void B("Все поля обязательны для заполнения.");B(""),z(!0);let r=await o({title:f,description:N,assignedTo:k,assignedBy:(null==e||null==(t=e.currentUser)?void 0:t.email)||"dispatcher",priority:M});r.success?(y(""),w(""),L(""),C("medium"),b(!1)):B(r.error||"Произошла ошибка."),z(!1)},R=t.length,D=t.filter(e=>"in_progress"===e.status).length,V=t.filter(e=>"completed"===e.status).length,_=t.filter(e=>"pending"===e.status).length,H=x.length;return(0,r.jsx)("div",{className:"min-h-screen bg-white",children:(0,r.jsxs)("div",{className:"mx-auto max-w-7xl px-4 sm:px-6 lg:px-8 py-8",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-8",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h1",{className:"text-4xl font-bold text-gray-900 mb-2",children:"Панель диспетчера"}),(0,r.jsx)("p",{className:"text-lg text-gray-600",children:"Управляйте задачами и координируйте работу водителей"})]}),(0,r.jsxs)("button",{onClick:()=>b(!0),className:"flex items-center gap-2 px-6 py-3 bg-blue-600 hover:bg-blue-700 text-white rounded-xl font-semibold shadow-lg hover:shadow-xl transition-all duration-200",children:[(0,r.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),"Новая задача"]})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-6 mb-8",children:[(0,r.jsx)(c.A,{title:"Всего задач",value:R,icon:(0,r.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})}),color:"blue"}),(0,r.jsx)(c.A,{title:"В работе",value:D,icon:(0,r.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 10V3L4 14h7v7l9-11h-7z"})}),color:"orange"}),(0,r.jsx)(c.A,{title:"Ожидают",value:_,icon:(0,r.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),color:"purple"}),(0,r.jsx)(c.A,{title:"Завершено",value:V,icon:(0,r.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),color:"green"}),(0,r.jsx)(c.A,{title:"Водители",value:H,icon:(0,r.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})}),color:"red"})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 xl:grid-cols-4 gap-8",children:[(0,r.jsx)("div",{className:"xl:col-span-3",children:(0,r.jsxs)("div",{className:"bg-white rounded-2xl shadow-lg border border-gray-100 overflow-hidden",children:[(0,r.jsx)("div",{className:"p-6 border-b border-gray-100",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:"Активные задачи"}),(0,r.jsx)("div",{className:"flex items-center gap-2",children:(0,r.jsxs)("select",{className:"px-3 py-2 border border-gray-200 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,r.jsx)("option",{children:"Все статусы"}),(0,r.jsx)("option",{children:"Ожидают"}),(0,r.jsx)("option",{children:"В работе"}),(0,r.jsx)("option",{children:"Завершено"})]})})]})}),(0,r.jsx)("div",{className:"p-6",children:(0,r.jsx)(m,{tasks:t,drivers:x,loading:h})})]})}),(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"bg-white rounded-2xl shadow-lg border border-gray-100 p-6",children:[(0,r.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Быстрые действия"}),(0,r.jsxs)("div",{className:"space-y-3",children:[(0,r.jsxs)("button",{className:"w-full flex items-center gap-3 p-3 text-left bg-blue-50 hover:bg-blue-100 rounded-xl transition-colors",children:[(0,r.jsx)("div",{className:"w-8 h-8 bg-blue-500 rounded-lg flex items-center justify-center",children:(0,r.jsx)("svg",{className:"w-4 h-4 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"font-medium text-gray-900",children:"Отчеты"}),(0,r.jsx)("p",{className:"text-xs text-gray-500",children:"Просмотр статистики"})]})]}),(0,r.jsxs)("button",{className:"w-full flex items-center gap-3 p-3 text-left bg-green-50 hover:bg-green-100 rounded-xl transition-colors",children:[(0,r.jsx)("div",{className:"w-8 h-8 bg-green-500 rounded-lg flex items-center justify-center",children:(0,r.jsxs)("svg",{className:"w-4 h-4 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"font-medium text-gray-900",children:"Карта"}),(0,r.jsx)("p",{className:"text-xs text-gray-500",children:"Отслеживание водителей"})]})]})]})]}),(0,r.jsxs)("div",{className:"bg-white rounded-2xl shadow-lg border border-gray-100 p-6",children:[(0,r.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Активные водители"}),p?(0,r.jsx)("div",{className:"space-y-3",children:[void 0,void 0,void 0].map((e,s)=>(0,r.jsxs)("div",{className:"animate-pulse flex items-center gap-3",children:[(0,r.jsx)("div",{className:"w-8 h-8 bg-gray-200 rounded-full"}),(0,r.jsx)("div",{className:"flex-1 h-4 bg-gray-200 rounded"})]},s))}):(0,r.jsx)("div",{className:"space-y-3",children:x.slice(0,5).map(e=>{var s,t;return(0,r.jsxs)("div",{className:"flex items-center gap-3 p-2 rounded-lg hover:bg-gray-50",children:[(0,r.jsx)("div",{className:"w-8 h-8 bg-blue-600 rounded-full flex items-center justify-center",children:(0,r.jsx)("span",{className:"text-white text-sm font-medium",children:(null==(t=e.email)||null==(s=t.charAt(0))?void 0:s.toUpperCase())||"U"})}),(0,r.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,r.jsx)("p",{className:"text-sm font-medium text-gray-900 truncate",children:e.email}),(0,r.jsxs)("div",{className:"flex items-center gap-1",children:[(0,r.jsx)("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),(0,r.jsx)("span",{className:"text-xs text-gray-500",children:"Онлайн"})]})]})]},e.uid)})})]})]})]}),j&&(0,r.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:(0,r.jsxs)("div",{className:"bg-white rounded-2xl shadow-2xl max-w-md w-full max-h-[90vh] overflow-y-auto",children:[(0,r.jsx)("div",{className:"p-6 border-b border-gray-100",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsx)("h2",{className:"text-xl font-bold text-gray-900",children:"Создать новую задачу"}),(0,r.jsx)("button",{onClick:()=>b(!1),className:"p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-lg transition-colors",children:(0,r.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})}),(0,r.jsxs)("form",{onSubmit:W,className:"p-6 space-y-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"title",className:"label",children:"Название задачи"}),(0,r.jsx)("input",{id:"title",type:"text",value:f,onChange:e=>y(e.target.value),className:"input",placeholder:"Доставка посылки #123",required:!0})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"description",className:"label",children:"Описание"}),(0,r.jsx)("textarea",{id:"description",value:N,onChange:e=>w(e.target.value),className:"input",rows:3,placeholder:"Забрать со склада А, доставить на склад Б",required:!0})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"priority",className:"label",children:"Приоритет"}),(0,r.jsxs)("select",{id:"priority",value:M,onChange:e=>C(e.target.value),className:"input",children:[(0,r.jsx)("option",{value:"low",children:"Низкий"}),(0,r.jsx)("option",{value:"medium",children:"Средний"}),(0,r.jsx)("option",{value:"high",children:"Высокий"})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"driver",className:"label",children:"Назначить водителю"}),(0,r.jsxs)("select",{id:"driver",value:k,onChange:e=>L(e.target.value),className:"input",disabled:p,required:!0,children:[(0,r.jsx)("option",{value:"",disabled:!0,children:p?"Загрузка водителей...":"Выберите водителя"}),x.map(e=>(0,r.jsx)("option",{value:e.uid,children:e.email},e.uid))]})]}),S&&(0,r.jsx)("div",{className:"p-3 bg-red-50 border border-red-200 rounded-lg",children:(0,r.jsx)("p",{className:"text-sm text-red-600",children:S})}),(0,r.jsxs)("div",{className:"flex gap-3 pt-4",children:[(0,r.jsx)("button",{type:"button",onClick:()=>b(!1),className:"flex-1 px-4 py-2 text-gray-700 bg-gray-100 hover:bg-gray-200 rounded-lg font-medium transition-colors",children:"Отмена"}),(0,r.jsx)("button",{type:"submit",disabled:A,className:"flex-1 px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg font-medium hover:shadow-lg disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200",children:A?"Создание...":"Создать задачу"})]})]})]})})]})})}},9934:(e,s,t)=>{t.d(s,{D:()=>d,R:()=>n});var r=t(5155),a=t(2115),l=t(4585);let i=(0,a.createContext)(null),n=e=>{let{children:s}=e;return(0,r.jsx)(i.Provider,{value:{app:l.yA,auth:l.j2,firestore:l.kA,messaging:l.BV},children:s})},d=()=>{let e=(0,a.useContext)(i);if(!e)throw Error("useFirebase must be used within a FirebaseProvider");return e}}}]);